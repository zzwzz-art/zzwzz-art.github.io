<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz sulle Fiabe</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f9;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            flex-direction: column;
        }
        .quiz-container {
            background-color: white;
            border-radius: 10px;
            padding: 20px;
            width: 90%;
            max-width: 1200px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            overflow-y: auto;
            height: 70vh;
            border: 4px solid transparent;
            border-radius: 15px;
            background-image: linear-gradient(45deg, #ff7f7f, #ffb79e, #ffcf66, #c0ff66, #66ff66, #66ffb3, #66ccff);
            background-size: 200% 200%;
            animation: gradient 10s ease infinite;
        }
        @keyframes gradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        h1 {
            text-align: center;
            margin-bottom: 20px;
        }
        .columns {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 20px;
            padding: 10px;
            border-bottom: 1px solid #ddd;
        }
        .column {
            display: flex;
            flex-direction: column;
            flex-basis: 50%;
        }
        .answers li {
            background-color: #f0f0f0;
            margin: 5px 0;
            padding: 10px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
            position: relative;
            width: 100%;  /* Assicura che l'elemento occupi tutta la larghezza del contenitore */
            box-sizing: border-box; /* Includi padding e border nel calcolo della larghezza */
        }
        .answers li:hover { 
            background-color: #e1e1e1; 
        }
        .correct { background-color: #4CAF50 !important; color: white; }
        .incorrect { background-color: #F44336 !important; color: white; }
        .explanation {
            font-size: 14px;
            color: white;
            margin-top: 5px;
            font-style: italic;
            visibility: visible;
        }
        .submit-btn {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin-top: 20px;
            width: 100%;
        }
        .submit-btn:hover { background-color: #45a049; }
        
        /* Pulsante Approfondimenti: larghezza metà, allineato a sinistra */
        .approfondimenti-btn {
            margin-top: 10px;
            padding: 8px 15px;
            background-color: #2196F3;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            width: 50%; /* Pulsante Approfondimenti largo metà */
            text-align: center;
            margin-left: 0; /* Allineato a sinistra */
        }
        .approfondimenti-btn:hover {
            background-color: #1976D2;
        }
        
        /* Menu a discesa per approfondimenti con larghezza uguale e allineato a sinistra */
        .dropdown-menu {
            display: none;
            list-style-type: none;
            margin-top: 10px;
            padding: 0;
            background-color: #f0f0f0;
            border-radius: 5px;
            width: 50%; /* Menu a discesa largo quanto Approfondimenti */
            margin-left: 0; /* Allineato a sinistra */
        }
        .dropdown-menu li {
            padding: 8px 12px;
            cursor: pointer;
            background-color: #fff;
            border-radius: 5px;
            margin: 5px 0;
            text-align: center;
            width: 100%;
            background-color: transparent; /* Sfondo trasparente per evitare doppio sfondo */
            box-sizing: border-box; /* Includi padding e bordi nel calcolo della larghezza */
        }
        .dropdown-menu li:hover {
            background-color: #e1e1e1;
        }

        /* Modifiche ai pulsanti di testo, audio, video, pratica per farli larghi come Approfondimenti */
        .dropdown-menu li {
            width: 100%; /* Imposta la larghezza al 100% */
        }

        /* Finestra modale */
        .modal {
            display: none;
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgb(0,0,0); /* Colore di sfondo trasparente */
            background-color: rgba(0,0,0,0.4); /* Semi-trasparente */
            padding-top: 60px;
        }

        /* Modal Content */
        .modal-content {
            background-color: #fefefe;
            margin: 5% auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
            max-width: 600px;
        }

        /* Il pulsante per chiudere la finestra */
        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }

        .close:hover,
        .close:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="quiz-container">
        <h1><a href="https://app.napkin.ai/page/CgoiCHByb2Qtb25lEiwKBFBhZ2UaJDY1YmQ5ZjViLTA4OGItNGRmYi1hM2M1LTdiNDA1Y2RiZDk2Mg?s=1" target="_blank">Quiz sulle Fiabe</a></h1>
        <div id="quiz"></div>
        <button class="submit-btn" onclick="submitQuiz()">Verifica Risposte</button>
    </div>
    <!-- Modal -->
    <div id="myModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <p id="modal-text"></p>
        </div>
    </div>

    <script>
        const questions = [
    {
        "question": "Qual è la struttura narrativa del Decameron?",
        "answers": [
            "Una poesia in rima",
            "Un dialogo filosofico",
            "Una cornice con cento novelle",
            "Un trattato sulla peste"
        ],
        "correct": 2,
        "explanation": "NB. \"Il Decameron è strutturato in una cornice narrativa che racchiude cento novelle raccontate da dieci giovani in dieci giorni.\"",
        "text": "Il Decameron è ambientato durante la peste del 1348 a Firenze. Dieci giovani (sette donne e tre uomini) si rifugiano in campagna e decidono di raccontare ogni giorno una novella ciascuno per dieci giorni. Da qui nasce una raccolta di cento novelle, da cui il titolo (dal greco 'deka' e 'hemera': dieci giorni)."
    },
    {
        "question": "Chi è l'autore del Decameron?",
        "answers": [
            "Dante Alighieri",
            "Giovanni Boccaccio",
            "Francesco Petrarca",
            "Niccolò Machiavelli"
        ],
        "correct": 1,
        "explanation": "NB. \"Giovanni Boccaccio è l'autore del Decameron, una delle opere più importanti della letteratura italiana trecentesca.\"",
        "text": "Giovanni Boccaccio (1313-1375) fu uno scrittore, poeta e umanista fiorentino. Il Decameron rappresenta la sua opera maggiore, considerata un capolavoro della prosa italiana medievale. Boccaccio unisce realismo e ironia, riflettendo sulla natura umana con profondità e leggerezza."
    },
    {
        "question": "In quale contesto storico si svolge il Decameron?",
        "answers": [
            "Durante le Crociate",
            "Durante la peste del 1348",
            "Durante l'esilio di Dante",
            "Durante la guerra dei Cent'anni"
        ],
        "correct": 1,
        "explanation": "NB. \"Il Decameron si svolge durante l'epidemia di peste che colpì Firenze nel 1348.\"",
        "text": "La peste del 1348 fu una delle più gravi pandemie della storia europea. Nel Decameron, essa è lo sfondo che induce i dieci giovani a lasciare la città e a rifugiarsi in campagna. La peste assume un ruolo simbolico, marcando un passaggio tra il caos e la possibilità di una nuova socialità fondata sul racconto e sullo svago intelligente."
    },
    {
        "question": "Quanti racconti contiene il Decameron?",
        "answers": [
            "50 novelle",
            "70 novelle",
            "100 novelle",
            "120 novelle"
        ],
        "correct": 2,
        "explanation": "NB. \"Il Decameron contiene cento novelle raccontate in dieci giorni da dieci giovani.\"",
        "text": "Ogni giorno, uno dei giovani assume il ruolo di re o regina della giornata e sceglie il tema a cui dovranno ispirarsi le novelle. Le cento storie toccano una vasta gamma di temi, dai più comici ai più drammatici, dai più amorosi ai più morali."
    },
    {
        "question": "Quale tra questi è un tema centrale del Decameron?",
        "answers": [
            "La redenzione religiosa",
            "La celebrazione della nobiltà",
            "L'ingegno umano",
            "La predestinazione"
        ],
        "correct": 2,
        "explanation": "NB. \"Uno dei temi centrali del Decameron è l'ingegno umano, spesso capace di risolvere situazioni difficili con astuzia.\"",
        "text": "Nel Decameron, l'ingegno è spesso premiato. I personaggi più intelligenti, astuti e capaci di adattarsi alla realtà riescono a ottenere ciò che desiderano. Boccaccio valorizza la prontezza mentale, la furbizia e l'inventiva, indipendentemente dalla classe sociale."
    },
    {
        "question": "Quale famosa novella racconta il sacrificio di una madre per amore?",
        "answers": [
            "Griselda",
            "Chichibìo",
            "Andreuccio da Perugia",
            "Alatiel"
        ],
        "correct": 0,
        "explanation": "NB. \"La novella di Griselda è un esempio di pazienza e sacrificio femminile, messo alla prova dal marito Gualtieri.\"",
        "text": "L'ultima novella del Decameron narra la storia di Griselda, una donna umile sottoposta a dure prove dal marito per testarne la fedeltà e la pazienza. La novella pone interrogativi sul ruolo della donna, sull'obbedienza e sulla crudeltà travestita da virtù."
    },
    {
        "question": "Quale narratore dirige il primo giorno del Decameron?",
        "answers": [
            "Pampinea",
            "Filostrato",
            "Dioneo",
            "Elissa"
        ],
        "correct": 0,
        "explanation": "NB. \"Pampinea è la prima a proporre di lasciare Firenze e diventa la regina del primo giorno.\"",
        "text": "Pampinea, tra le sette fanciulle, è la più matura e prende l'iniziativa di lasciare Firenze per sfuggire alla peste. Nel primo giorno del Decameron, non viene imposto un tema, e i narratori possono raccontare qualsiasi storia desiderino."
    },
    {
        "question": "Qual è lo stile linguistico usato da Boccaccio nel Decameron?",
        "answers": [
            "Volgare fiorentino elegante",
            "Latino ecclesiastico",
            "Volgare siciliano",
            "Lingua provenzale"
        ],
        "correct": 0,
        "explanation": "NB. \"Boccaccio usa un volgare fiorentino elegante e ricco, anticipando l’italiano letterario moderno.\"",
        "text": "Il Decameron è scritto in un volgare fiorentino alto, chiaro e narrativamente efficace. Boccaccio unisce il registro colto e quello popolare, creando una prosa fluida e variegata, considerata un modello per la prosa italiana rinascimentale."
    },
    {
        "question": "Come viene rappresentata la Chiesa nel Decameron?",
        "answers": [
            "Sempre in modo rispettoso",
            "Come guida morale",
            "Spesso con ironia e critica",
            "Come unica salvezza"
        ],
        "correct": 2,
        "explanation": "NB. \"Nel Decameron, la Chiesa è spesso oggetto di critica per la corruzione e l’ipocrisia di alcuni suoi membri.\"",
        "text": "Molte novelle del Decameron mettono in ridicolo frati, monaci e religiosi corrotti o ipocriti. Questo non implica un attacco alla religione, ma piuttosto alla falsità di chi se ne serve per fini personali. L’ironia di Boccaccio è sottile e acuta."
    },
    {
        "question": "Che ruolo ha il racconto nel Decameron?",
        "answers": [
            "È un rito magico",
            "È una cura contro la morte",
            "È un obbligo morale",
            "È uno strumento per l'insegnamento scolastico"
        ],
        "correct": 1,
        "explanation": "NB. \"Nel Decameron, il racconto è una forma di evasione dalla realtà della peste e un mezzo per riscoprire la vita.\"",
        "text": "Il racconto nel Decameron è centrale: serve a tenere viva la mente, a creare legami sociali, a trasmettere conoscenze ed esperienze. In un tempo di morte e disperazione, narrare storie diventa un gesto vitale, creativo, quasi terapeutico."
    }
];

        let quizContainer = document.getElementById("quiz");
        let userAnswers = [];

        function renderQuiz() {
            questions.forEach((question, index) => {
                let questionElement = document.createElement("div");
                questionElement.classList.add("columns");
                
                let questionTextContainer = document.createElement("div");
                questionTextContainer.classList.add("column");
                
                let questionText = document.createElement("p");
                questionText.textContent = question.question;
                questionTextContainer.appendChild(questionText);

                // Pulsante approfondimenti
                let approfondimentiBtn = document.createElement("button");
                approfondimentiBtn.classList.add("approfondimenti-btn");
                approfondimentiBtn.textContent = "Approfondimenti";
                approfondimentiBtn.onclick = () => toggleApprofondimenti(index);
                questionTextContainer.appendChild(approfondimentiBtn);

                // Menu a discesa per approfondimenti
                let dropdownMenu = document.createElement("ul");
                dropdownMenu.classList.add("dropdown-menu");
                dropdownMenu.id = `dropdown-menu-${index}`;
                dropdownMenu.innerHTML = `
                    <li onclick="showText(${index})">Testo</li>
                    <li>Audio</li>
                    <li>Video</li>
                    <li>Pratica</li>
                `;
                questionTextContainer.appendChild(dropdownMenu);

                let answerContainer = document.createElement("div");
                answerContainer.classList.add("column");
                
                let answersList = document.createElement("ul");
                answersList.classList.add("answers");
                question.answers.forEach((answer, i) => {
                    let answerItem = document.createElement("li");
                    answerItem.textContent = answer;
                    answerItem.onclick = () => selectAnswer(index, i, answerItem);
                    answersList.appendChild(answerItem);
                });
                answerContainer.appendChild(answersList);
                
                questionElement.appendChild(questionTextContainer);
                questionElement.appendChild(answerContainer);
                quizContainer.appendChild(questionElement);
            });
        }

        function toggleApprofondimenti(index) {
            let dropdownMenu = document.getElementById(`dropdown-menu-${index}`);
            dropdownMenu.style.display = dropdownMenu.style.display === "block" ? "none" : "block";
        }

        function selectAnswer(questionIndex, answerIndex, answerItem) {
            userAnswers[questionIndex] = answerIndex;
            let answersList = quizContainer.children[questionIndex].querySelector(".answers").children;
            
            for (let i = 0; i < answersList.length; i++) {
                answersList[i].classList.remove("correct", "incorrect");
            }

            if (answerIndex === questions[questionIndex].correct) {
                answerItem.classList.add("correct");
            } else {
                answerItem.classList.add("incorrect");
                
                let explanation = answerItem.querySelector(".explanation");
                if (!explanation) {
                    explanation = document.createElement("div");
                    explanation.classList.add("explanation");
                    explanation.textContent = questions[questionIndex].explanation;
                    answerItem.appendChild(explanation);
                }
            }
        }

        // Funzione per aprire il testo approfondimento nella finestra modale
        function showText(index) {
            let modal = document.getElementById("myModal");
            let modalText = document.getElementById("modal-text");
            modalText.textContent = questions[index].text;

            modal.style.display = "block"; // Mostra la finestra modale
        }

        // Funzione per chiudere la finestra modale
        let span = document.getElementsByClassName("close")[0];
        span.onclick = function() {
            let modal = document.getElementById("myModal");
            modal.style.display = "none";
        }

        window.onclick = function(event) {
            let modal = document.getElementById("myModal");
            if (event.target == modal) {
                modal.style.display = "none";
            }
        }

        renderQuiz();
    </script>
</body>
</html>
